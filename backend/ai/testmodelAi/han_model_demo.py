#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
TEST M√î H√åNH HAN - MINH H·ªåA KH·∫¢ NƒÇNG PH√ÇN LO·∫†I
(Kh√¥ng load model th·ª±c, ch·ªâ demo flow ho·∫°t ƒë·ªông)
"""

import os
from datetime import datetime

def simulate_han_model_prediction(commit_message):
    """
    M√¥ ph·ªèng k·∫øt qu·∫£ t·ª´ model HAN th·ª±c
    (Th·ª±c t·∫ø s·∫Ω load t·ª´ best_model.pth)
    """
    text = commit_message.lower()
    
    # M√¥ ph·ªèng logic ph√¢n lo·∫°i c·ªßa HAN model
    
    # 1. Commit Type Classification
    if any(word in text for word in ['feat:', 'feature:', 'add', 'implement', 'create']):
        commit_type = 'feat'
        type_confidence = 0.95
    elif any(word in text for word in ['fix:', 'bug:', 'resolve', 'patch']):
        commit_type = 'fix'  
        type_confidence = 0.92
    elif any(word in text for word in ['docs:', 'documentation', 'readme']):
        commit_type = 'docs'
        type_confidence = 0.89
    elif any(word in text for word in ['test:', 'testing', 'spec']):
        commit_type = 'test'
        type_confidence = 0.87
    elif any(word in text for word in ['refactor:', 'restructure', 'cleanup']):
        commit_type = 'refactor'
        type_confidence = 0.91
    elif any(word in text for word in ['chore:', 'update', 'dependency']):
        commit_type = 'chore'
        type_confidence = 0.88
    elif any(word in text for word in ['style:', 'format', 'lint']):
        commit_type = 'style'
        type_confidence = 0.86
    elif any(word in text for word in ['perf:', 'performance', 'optimize']):
        commit_type = 'perf'
        type_confidence = 0.93
    else:
        commit_type = 'other'
        type_confidence = 0.75
    
    # 2. Purpose Classification
    purpose_map = {
        'feat': 'Feature Implementation',
        'fix': 'Bug Fix',
        'docs': 'Documentation Update', 
        'test': 'Test Update',
        'refactor': 'Code Refactoring',
        'chore': 'Maintenance',
        'style': 'Code Style',
        'perf': 'Performance Improvement',
        'other': 'Other'
    }
    purpose = purpose_map.get(commit_type, 'Other')
    purpose_confidence = type_confidence - 0.03
    
    # 3. Sentiment Analysis
    if any(word in text for word in ['critical', 'urgent', 'emergency', 'severe']):
        sentiment = 'urgent'
        sentiment_confidence = 0.94
    elif any(word in text for word in ['error', 'bug', 'fail', 'problem']):
        sentiment = 'negative'
        sentiment_confidence = 0.88
    elif any(word in text for word in ['improve', 'enhance', 'optimize', 'add', 'new']):
        sentiment = 'positive'
        sentiment_confidence = 0.90
    else:
        sentiment = 'neutral'
        sentiment_confidence = 0.85
    
    # 4. Tech Tag Classification (m·ªü r·ªông)
    if any(word in text for word in ['auth', 'authentication', 'login', 'oauth']):
        tech_tag = 'authentication'
        tech_confidence = 0.92
    elif any(word in text for word in ['database', 'db', 'sql', 'query']):
        tech_tag = 'database'
        tech_confidence = 0.89
    elif any(word in text for word in ['api', 'endpoint', 'rest']):
        tech_tag = 'api'
        tech_confidence = 0.91
    elif any(word in text for word in ['ui', 'frontend', 'component']):
        tech_tag = 'frontend'
        tech_confidence = 0.87
    elif any(word in text for word in ['security', 'vulnerability', 'encryption']):
        tech_tag = 'security'
        tech_confidence = 0.95
    else:
        tech_tag = 'general'
        tech_confidence = 0.80
    
    return {
        'commit_type': {'label': commit_type, 'confidence': type_confidence},
        'purpose': {'label': purpose, 'confidence': purpose_confidence},
        'sentiment': {'label': sentiment, 'confidence': sentiment_confidence},
        'tech_tag': {'label': tech_tag, 'confidence': tech_confidence}
    }

def run_han_model_demo():
    """Demo kh·∫£ nƒÉng ph√¢n lo·∫°i c·ªßa model HAN v·ªõi ph√¢n t√≠ch chi ti·∫øt"""
    
    print("=" * 80)
    print("ü§ñ DEMO M√î H√åNH HAN - PH√ÇN T√çCH COMMIT CHI TI·∫æT")
    print("=" * 80)
    print(f"‚è∞ Th·ªùi gian demo: {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}")
    print()
    print("üìù L∆ØU √ù: Demo n√†y m√¥ ph·ªèng k·∫øt qu·∫£ t·ª´ model HAN th·ª±c")
    print("üîß Model th·ª±c ƒë∆∞·ª£c l∆∞u t·∫°i: models/han_github_model/best_model.pth")
    print()
    
    # Test cases ƒëa d·∫°ng v·ªõi 30 commits v√† t√°c gi·∫£
    test_commits = [
        # Developer 1: John Smith (Frontend specialist)
        ("john.smith@company.com", "feat: implement responsive navigation component"),
        ("john.smith@company.com", "feat: add dark mode toggle functionality"),
        ("john.smith@company.com", "fix: resolve mobile layout issues in header"),
        ("john.smith@company.com", "style: update CSS variables for consistent theming"),
        ("john.smith@company.com", "feat: create user profile management page"),
        
        # Developer 2: Sarah Johnson (Backend specialist)  
        ("sarah.johnson@company.com", "feat: implement user authentication API"),
        ("sarah.johnson@company.com", "fix: resolve database connection timeout issues"),
        ("sarah.johnson@company.com", "feat: add JWT token refresh mechanism"),
        ("sarah.johnson@company.com", "perf: optimize database queries for user search"),
        ("sarah.johnson@company.com", "fix: handle edge case in password validation"),
        ("sarah.johnson@company.com", "feat: implement role-based access control"),
        
        # Developer 3: Mike Chen (DevOps/Infrastructure)
        ("mike.chen@company.com", "chore: update Docker configuration for production"),
        ("mike.chen@company.com", "fix: resolve CI/CD pipeline deployment issues"),
        ("mike.chen@company.com", "chore: upgrade Node.js to version 18 LTS"),
        ("mike.chen@company.com", "perf: optimize build process with caching"),
        
        # Developer 4: Emily Davis (QA/Testing)
        ("emily.davis@company.com", "test: add unit tests for authentication service"),
        ("emily.davis@company.com", "test: implement integration tests for API endpoints"),
        ("emily.davis@company.com", "fix: correct test data setup for user scenarios"),
        ("emily.davis@company.com", "test: add end-to-end tests for login flow"),
        
        # Developer 5: Alex Rodriguez (Security specialist)
        ("alex.rodriguez@company.com", "fix(security): patch XSS vulnerability in user input"),
        ("alex.rodriguez@company.com", "feat(security): implement rate limiting for API"),
        ("alex.rodriguez@company.com", "fix(security): resolve CSRF token validation issue"),
        
        # Developer 6: Lisa Wang (Documentation)
        ("lisa.wang@company.com", "docs: update API documentation with new endpoints"),
        ("lisa.wang@company.com", "docs: add installation guide for development setup"),
        ("lisa.wang@company.com", "docs: create user manual for admin features"),
        
        # Developer 7: Tom Brown (Performance specialist)
        ("tom.brown@company.com", "perf: implement lazy loading for large datasets"),
        ("tom.brown@company.com", "perf: optimize image compression and caching"),
        ("tom.brown@company.com", "refactor: simplify complex rendering logic"),
        
        # Developer 8: Anna Kim (Junior developer - fewer commits)
        ("anna.kim@company.com", "fix: correct typo in error messages"),
        ("anna.kim@company.com", "style: fix indentation in configuration files")
    ]    
    print("üß™ B·∫ÆT ƒê·∫¶U DEMO V·ªöI 30 COMMIT MESSAGES")
    print("=" * 80)
    
    total_tests = len(test_commits)
    author_stats = {}
    commit_type_stats = {}
    purpose_stats = {}
    sentiment_stats = {}
    tech_tag_stats = {}
    
    for i, (author, commit_message) in enumerate(test_commits, 1):
        print(f"\nüîç DEMO #{i}")
        print("-" * 60)
        
        # Input
        print(f"üìù ƒê·∫¶U V√ÄO:")
        print(f"   Author: {author}")
        print(f"   Commit Message: '{commit_message}'")
        
        # Model prediction (simulated)
        predictions = simulate_han_model_prediction(commit_message)
        
        print(f"\nü§ñ K·∫æT QU·∫¢ T·ª™ MODEL HAN:")
        print(f"   üìã Commit Type: {predictions['commit_type']['label']} "
              f"(tin c·∫≠y: {predictions['commit_type']['confidence']:.0%})")
        print(f"   üéØ Purpose: {predictions['purpose']['label']} "
              f"(tin c·∫≠y: {predictions['purpose']['confidence']:.0%})")
        print(f"   üòä Sentiment: {predictions['sentiment']['label']} "
              f"(tin c·∫≠y: {predictions['sentiment']['confidence']:.0%})")
        print(f"   üè∑Ô∏è Tech Tag: {predictions['tech_tag']['label']} "
              f"(tin c·∫≠y: {predictions['tech_tag']['confidence']:.0%})")
        
        # Ph√¢n t√≠ch
        expected_type = commit_message.split(':')[0].split('(')[0]
        predicted_type = predictions['commit_type']['label']
        is_correct = expected_type.lower() == predicted_type.lower()
        
        print(f"\n‚úÖ PH√ÇN T√çCH:")
        print(f"   Expected: {expected_type}")
        print(f"   Predicted: {predicted_type}")
        print(f"   K·∫øt qu·∫£: {'‚úì CH√çNH X√ÅC' if is_correct else '‚úó SAI S√ìT'}")
        
        # Thu th·∫≠p th·ªëng k√™
        if author not in author_stats:
            author_stats[author] = {
                'total_commits': 0,
                'commit_types': {},
                'purposes': {},
                'sentiments': {},
                'tech_tags': {}
            }
        
        author_stats[author]['total_commits'] += 1
        
        # Th·ªëng k√™ theo lo·∫°i commit
        commit_type = predictions['commit_type']['label']
        author_stats[author]['commit_types'][commit_type] = author_stats[author]['commit_types'].get(commit_type, 0) + 1
        commit_type_stats[commit_type] = commit_type_stats.get(commit_type, 0) + 1
        
        # Th·ªëng k√™ theo purpose
        purpose = predictions['purpose']['label']
        author_stats[author]['purposes'][purpose] = author_stats[author]['purposes'].get(purpose, 0) + 1
        purpose_stats[purpose] = purpose_stats.get(purpose, 0) + 1
        
        # Th·ªëng k√™ theo sentiment
        sentiment = predictions['sentiment']['label']
        author_stats[author]['sentiments'][sentiment] = author_stats[author]['sentiments'].get(sentiment, 0) + 1
        sentiment_stats[sentiment] = sentiment_stats.get(sentiment, 0) + 1
        
        # Th·ªëng k√™ theo tech tag
        tech_tag = predictions['tech_tag']['label']
        author_stats[author]['tech_tags'][tech_tag] = author_stats[author]['tech_tags'].get(tech_tag, 0) + 1
        tech_tag_stats[tech_tag] = tech_tag_stats.get(tech_tag, 0) + 1
        
        print("-" * 60)
    
    # T·ªïng k·∫øt v√† ph√¢n t√≠ch chi ti·∫øt
    print(f"\nüìä T·ªîNG K·∫æT DEMO & PH√ÇN T√çCH CHI TI·∫æT")
    print("=" * 80)
    print(f"üî¢ T·ªïng s·ªë commits demo: {total_tests}")
    print(f"üë• T·ªïng s·ªë developers: {len(author_stats)}")
    print()
    
    # Ph√¢n t√≠ch theo t√°c gi·∫£
    print("üë§ PH√ÇN T√çCH THEO T√ÅC GI·∫¢:")
    print("=" * 60)
    
    # S·∫Øp x·∫øp theo s·ªë commit (t·ª´ nhi·ªÅu ƒë·∫øn √≠t)
    sorted_authors = sorted(author_stats.items(), key=lambda x: x[1]['total_commits'], reverse=True)
    
    for author, stats in sorted_authors:
        name = author.split('@')[0].replace('.', ' ').title()
        print(f"\nüßë‚Äçüíª {name} ({author})")
        print(f"   üìä T·ªïng commits: {stats['total_commits']}")
        
        # Top commit types
        top_commit_types = sorted(stats['commit_types'].items(), key=lambda x: x[1], reverse=True)
        print(f"   üè∑Ô∏è Commit types:")
        for commit_type, count in top_commit_types:
            percentage = (count / stats['total_commits']) * 100
            print(f"      ‚Ä¢ {commit_type}: {count} l·∫ßn ({percentage:.1f}%)")
        
        # Top purposes
        top_purposes = sorted(stats['purposes'].items(), key=lambda x: x[1], reverse=True)[:3]
        print(f"   üéØ Top purposes:")
        for purpose, count in top_purposes:
            print(f"      ‚Ä¢ {purpose}: {count} l·∫ßn")
        
        # Dominant tech tags
        top_tech_tags = sorted(stats['tech_tags'].items(), key=lambda x: x[1], reverse=True)[:2]
        print(f"   üîß Tech focus:")
        for tech_tag, count in top_tech_tags:
            print(f"      ‚Ä¢ {tech_tag}: {count} l·∫ßn")
    
    print("\n" + "=" * 60)
    
    # Ph√¢n t√≠ch t·ªïng quan
    print("\nüìà TH·ªêNG K√ä T·ªîNG QUAN:")
    print("=" * 60)
    
    # Top commit types
    print("\nüè∑Ô∏è PH√ÇN B·ªê COMMIT TYPES:")
    sorted_commit_types = sorted(commit_type_stats.items(), key=lambda x: x[1], reverse=True)
    for commit_type, count in sorted_commit_types:
        percentage = (count / total_tests) * 100
        print(f"   ‚Ä¢ {commit_type}: {count} commits ({percentage:.1f}%)")
    
    # Top purposes
    print("\nüéØ PH√ÇN B·ªê PURPOSES:")
    sorted_purposes = sorted(purpose_stats.items(), key=lambda x: x[1], reverse=True)
    for purpose, count in sorted_purposes[:5]:  # Top 5
        percentage = (count / total_tests) * 100
        print(f"   ‚Ä¢ {purpose}: {count} commits ({percentage:.1f}%)")
    
    # Sentiment analysis
    print("\nüòä PH√ÇN B·ªê SENTIMENT:")
    sorted_sentiments = sorted(sentiment_stats.items(), key=lambda x: x[1], reverse=True)
    for sentiment, count in sorted_sentiments:
        percentage = (count / total_tests) * 100
        print(f"   ‚Ä¢ {sentiment}: {count} commits ({percentage:.1f}%)")
    
    # Tech tags
    print("\nüîß PH√ÇN B·ªê TECH TAGS:")
    sorted_tech_tags = sorted(tech_tag_stats.items(), key=lambda x: x[1], reverse=True)
    for tech_tag, count in sorted_tech_tags:
        percentage = (count / total_tests) * 100
        print(f"   ‚Ä¢ {tech_tag}: {count} commits ({percentage:.1f}%)")
    
    # Insights v√† recommendations
    print("\nüí° INSIGHTS & NH·∫¨N X√âT:")
    print("=" * 60)
    
    # Developer v·ªõi nhi·ªÅu commits nh·∫•t
    most_active = sorted_authors[0]
    least_active = sorted_authors[-1]
    
    print(f"üèÜ Developer ho·∫°t ƒë·ªông nh·∫•t: {most_active[0].split('@')[0].replace('.', ' ').title()}")
    print(f"   ‚Ä¢ {most_active[1]['total_commits']} commits ({(most_active[1]['total_commits']/total_tests)*100:.1f}% t·ªïng commits)")
    
    print(f"\nüìâ Developer √≠t commits nh·∫•t: {least_active[0].split('@')[0].replace('.', ' ').title()}")
    print(f"   ‚Ä¢ {least_active[1]['total_commits']} commits ({(least_active[1]['total_commits']/total_tests)*100:.1f}% t·ªïng commits)")
    
    # Ph√¢n t√≠ch xu h∆∞·ªõng
    feat_count = commit_type_stats.get('feat', 0)
    fix_count = commit_type_stats.get('fix', 0)
    
    print(f"\nüîç Ph√¢n t√≠ch xu h∆∞·ªõng:")
    print(f"   ‚Ä¢ T·ª∑ l·ªá feat/fix: {feat_count}:{fix_count}")
    if feat_count > fix_count:
        print("   ‚Ä¢ Team ƒëang focus v√†o ph√°t tri·ªÉn t√≠nh nƒÉng m·ªõi")
    elif fix_count > feat_count:
        print("   ‚Ä¢ Team ƒëang focus v√†o s·ª≠a l·ªói v√† ·ªïn ƒë·ªãnh h·ªá th·ªëng")
    else:
        print("   ‚Ä¢ Team c√≥ s·ª± c√¢n b·∫±ng gi·ªØa ph√°t tri·ªÉn v√† maintenance")
    
    print(f"\nüìà Model HAN c√≥ th·ªÉ ph√¢n lo·∫°i: 4 tasks ƒë·ªìng th·ªùi")
    print(f"üéØ C√°c tasks:")
    print(f"   ‚Ä¢ Commit Type (feat, fix, docs, test, refactor, etc.)")
    print(f"   ‚Ä¢ Purpose (Feature Implementation, Bug Fix, etc.)")
    print(f"   ‚Ä¢ Sentiment (positive, negative, neutral, urgent)")
    print(f"   ‚Ä¢ Tech Tag (authentication, database, api, etc.)")
    print()
    print(f"‚ö° ∆Øu ƒëi·ªÉm c·ªßa Model HAN:")
    print(f"   ‚úì Multi-task learning (4 tasks c√πng l√∫c)")
    print(f"   ‚úì Hierarchical attention (word-level + sentence-level)")
    print(f"   ‚úì High accuracy tr√™n training data (~99%)")
    print(f"   ‚úì H·ªó tr·ª£ conventional commit format")
    print(f"   ‚úì Ph√¢n t√≠ch ƒë∆∞·ª£c patterns c·ªßa t·ª´ng developer")
    print()
    print(f"üîß S·ª≠ d·ª•ng Model th·ª±c:")
    print(f"   1. Load t·ª´: models/han_github_model/best_model.pth")
    print(f"   2. Thay th·∫ø simulate_han_model_prediction() b·∫±ng model th·ª±c")
    print(f"   3. S·ª≠ d·ª•ng tokenizer v√† label_encoders t·ª´ checkpoint")
    print(f"\nüéâ DEMO HO√ÄN TH√ÄNH!")
    print("=" * 80)
    
    # T·∫°o v√† l∆∞u b√°o c√°o chi ti·∫øt
    print(f"\nüìÑ T·∫†O B√ÅO C√ÅO CHI TI·∫æT...")
    detailed_report = generate_detailed_report(
        author_stats, commit_type_stats, purpose_stats, 
        sentiment_stats, tech_tag_stats, total_tests
    )
    
    # L∆∞u b√°o c√°o
    report_saved = save_analysis_report(detailed_report)
    
    if report_saved:
        print(f"‚úÖ B√°o c√°o ph√¢n t√≠ch ƒë√£ ƒë∆∞·ª£c t·∫°o th√†nh c√¥ng!")
        print(f"üìä C√≥ th·ªÉ s·ª≠ d·ª•ng b√°o c√°o n√†y ƒë·ªÉ:")
        print(f"   ‚Ä¢ ƒê√°nh gi√° hi·ªáu su·∫•t team")
        print(f"   ‚Ä¢ Ph√¢n t√≠ch xu h∆∞·ªõng ph√°t tri·ªÉn")
        print(f"   ‚Ä¢ L·∫≠p k·∫ø ho·∫°ch ph√¢n c√¥ng c√¥ng vi·ªác")
        print(f"   ‚Ä¢ Training v√† mentoring developers")
    
    return detailed_report

def generate_detailed_report(author_stats, commit_type_stats, purpose_stats, sentiment_stats, tech_tag_stats, total_commits):
    """T·∫°o b√°o c√°o chi ti·∫øt v·ªÅ ph√¢n t√≠ch commits"""
    
    report = {
        'summary': {
            'total_commits': total_commits,
            'total_developers': len(author_stats),
            'analysis_date': datetime.now().isoformat()
        },
        'developer_analysis': {},
        'overall_statistics': {
            'commit_types': commit_type_stats,
            'purposes': purpose_stats,
            'sentiments': sentiment_stats,
            'tech_tags': tech_tag_stats
        },
        'insights': {}
    }
    
    # Ph√¢n t√≠ch chi ti·∫øt t·ª´ng developer
    sorted_authors = sorted(author_stats.items(), key=lambda x: x[1]['total_commits'], reverse=True)
    
    for author, stats in sorted_authors:
        name = author.split('@')[0].replace('.', ' ').title()
        
        # T√¨m commit type ch·ªß ƒë·∫°o
        main_commit_type = max(stats['commit_types'].items(), key=lambda x: x[1])
        
        # T√≠nh productivity score (commits per category diversity)
        diversity_score = len(stats['commit_types']) / len(commit_type_stats) * 100
        
        report['developer_analysis'][author] = {
            'name': name,
            'total_commits': stats['total_commits'],
            'commit_percentage': (stats['total_commits'] / total_commits) * 100,
            'main_commit_type': main_commit_type[0],
            'main_commit_type_count': main_commit_type[1],
            'diversity_score': diversity_score,
            'specialization': 'Specialist' if diversity_score < 40 else 'Generalist',
            'detailed_stats': stats
        }
    
    # Insights t·ªïng quan
    most_active = sorted_authors[0]
    least_active = sorted_authors[-1]
    feat_count = commit_type_stats.get('feat', 0)
    fix_count = commit_type_stats.get('fix', 0)
    
    report['insights'] = {
        'most_active_developer': {
            'email': most_active[0],
            'name': most_active[0].split('@')[0].replace('.', ' ').title(),
            'commits': most_active[1]['total_commits']
        },
        'least_active_developer': {
            'email': least_active[0],
            'name': least_active[0].split('@')[0].replace('.', ' ').title(),
            'commits': least_active[1]['total_commits']
        },
        'team_focus': 'Feature Development' if feat_count > fix_count else 'Bug Fixing' if fix_count > feat_count else 'Balanced',
        'feat_fix_ratio': f"{feat_count}:{fix_count}",
        'productivity_distribution': 'Balanced' if max(author_stats.values(), key=lambda x: x['total_commits'])['total_commits'] <= total_commits * 0.4 else 'Concentrated'
    }
    
    return report

def save_analysis_report(report, filename="commit_analysis_detailed_report.json"):
    """L∆∞u b√°o c√°o ph√¢n t√≠ch ra file JSON"""
    import json
    
    try:
        with open(filename, 'w', encoding='utf-8') as f:
            json.dump(report, f, ensure_ascii=False, indent=2)
        print(f"üìÑ B√°o c√°o ƒë√£ ƒë∆∞·ª£c l∆∞u: {filename}")
        return True
    except Exception as e:
        print(f"‚ùå L·ªói khi l∆∞u b√°o c√°o: {e}")
        return False

def main():
    """H√†m ch√≠nh"""
    try:
        detailed_report = run_han_model_demo()
        
        # Hi·ªÉn th·ªã m·ªôt s·ªë insights quan tr·ªçng
        print(f"\nüéØ INSIGHTS QUAN TR·ªåNG:")
        print(f"=" * 50)
        
        insights = detailed_report['insights']
        print(f"üëë Developer t√≠ch c·ª±c nh·∫•t: {insights['most_active_developer']['name']}")
        print(f"   ({insights['most_active_developer']['commits']} commits)")
        
        print(f"üìâ Developer √≠t commit nh·∫•t: {insights['least_active_developer']['name']}")
        print(f"   ({insights['least_active_developer']['commits']} commits)")
        
        print(f"üéØ Focus c·ªßa team: {insights['team_focus']}")
        print(f"‚öñÔ∏è T·ª∑ l·ªá feat/fix: {insights['feat_fix_ratio']}")
        print(f"üìä Ph√¢n b·ªë productivity: {insights['productivity_distribution']}")
        
        print(f"\nüíº G·ª¢I √ù QU·∫¢N L√ù TEAM:")
        print(f"=" * 50)
        
        # Ph√¢n t√≠ch v√† ƒë∆∞a ra g·ª£i √Ω
        dev_analysis = detailed_report['developer_analysis']
        specialists = [dev for dev in dev_analysis.values() if dev['specialization'] == 'Specialist']
        generalists = [dev for dev in dev_analysis.values() if dev['specialization'] == 'Generalist']
        
        print(f"üîß Specialists ({len(specialists)} ng∆∞·ªùi): Focus s√¢u v√†o 1-2 lƒ©nh v·ª±c")
        for dev in specialists[:3]:  # Top 3
            print(f"   ‚Ä¢ {dev['name']}: chuy√™n {dev['main_commit_type']} ({dev['main_commit_type_count']} commits)")
        
        print(f"üåê Generalists ({len(generalists)} ng∆∞·ªùi): ƒêa d·∫°ng nhi·ªÅu lƒ©nh v·ª±c")
        for dev in generalists[:3]:  # Top 3
            print(f"   ‚Ä¢ {dev['name']}: diversity score {dev['diversity_score']:.1f}%")
        
        return detailed_report
        
    except Exception as e:
        print(f"‚ùå L·ªói khi ch·∫°y demo: {e}")
        return None

if __name__ == "__main__":
    main()
