{"repo": "emotion-js/emotion", "commit_sha": "b02f349d28df7bc77cad6d7e1b62aecef9f19405", "commit_message": "Fixed an issue with styled transformer sometimes not using the used local name (#2602)", "author": "Mateusz Burzyński", "date": "2021-12-20T22:19:39Z", "files_changed": ".changeset/perfect-yaks-carry.md,packages/babel-plugin/__tests__/import-mapping/__fixtures__/non-default-styled-aliased.js,packages/babel-plugin/__tests__/import-mapping/__snapshots__/import-mapping.js.snap,packages/babel-plugin/src/styled-macro.js", "file_count": "", "lines_added": "36", "lines_removed": "6", "total_changes": 42, "diff_content": "@@ -0,0 +1,5 @@\n+---\n+'@emotion/babel-plugin': patch\n+---\n+\n+Fixed an issue with styled transformer sometimes not using the used local name for the imported named export when used with `importMap`.\n@@ -0,0 +1,3 @@\n+import { nonDefaultStyled as someAlias } from 'package-one'\n+\n+let SomeComp = someAlias.div({ color: 'hotpink' })\n@@ -100,6 +100,33 @@ let SomeComp = nonDefaultStyled(\\\\\"div\\\\\", process.env.NODE_ENV === \\\\\"productio\n });\"\n `;\n \n+exports[`import mapping non-default-styled-aliased 1`] = `\n+\"import { nonDefaultStyled as someAlias } from 'package-one'\n+\n+let SomeComp = someAlias.div({ color: 'hotpink' })\n+\n+\n+      ↓ ↓ ↓ ↓ ↓ ↓\n+\n+function _EMOTION_STRINGIFIED_CSS_ERROR__() { return \\\\\"You have tried to stringify object returned from \\`css\\` function. It isn't supposed to be used directly (e.g. as value of the \\`className\\` prop), but rather handed to emotion so it can handle it (e.g. as value of \\`css\\` prop).\\\\\"; }\n+\n+import { nonDefaultStyled as someAlias } from 'package-one';\n+let SomeComp = someAlias(\\\\\"div\\\\\", process.env.NODE_ENV === \\\\\"production\\\\\" ? {\n+  target: \\\\\"erjjkeh0\\\\\"\n+} : {\n+  target: \\\\\"erjjkeh0\\\\\",\n+  label: \\\\\"SomeComp\\\\\"\n+})(process.env.NODE_ENV === \\\\\"production\\\\\" ? {\n+  name: \\\\\"3sn2xs\\\\\",\n+  styles: \\\\\"color:hotpink\\\\\"\n+} : {\n+  name: \\\\\"3sn2xs\\\\\",\n+  styles: \\\\\"color:hotpink\\\\\",\n+  map: \\\\\"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vbi1kZWZhdWx0LXN0eWxlZC1hbGlhc2VkLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUVlIiwiZmlsZSI6Im5vbi1kZWZhdWx0LXN0eWxlZC1hbGlhc2VkLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgbm9uRGVmYXVsdFN0eWxlZCBhcyBzb21lQWxpYXMgfSBmcm9tICdwYWNrYWdlLW9uZSdcblxubGV0IFNvbWVDb21wID0gc29tZUFsaWFzLmRpdih7IGNvbG9yOiAnaG90cGluaycgfSlcbiJdfQ== */\\\\\",\n+  toString: _EMOTION_STRINGIFIED_CSS_ERROR__\n+});\"\n+`;\n+\n exports[`import mapping styled-with-base-specified 1`] = `\n \"import { nonDefaultStyled } from 'package-four'\n \n@@ -38,12 +38,7 @@ export let styledTransformer = ({\n       (styledBaseImport[0] === importSource &&\n         styledBaseImport[1] === importSpecifierName)\n     ) {\n-      return importSpecifierName === 'default'\n-        ? t.identifier(\n-            path.get('specifiers').find(p => p.isImportDefaultSpecifier()).node\n-              .local.name\n-          )\n-        : t.identifier(importSpecifierName)\n+      return t.cloneNode(reference.node)\n     }\n \n     if (path.node) {\n", "commit_type": "fix", "dev_area": "Frontend", "risk": 3, "confidence_score": 5, "feature_en": "Fix styled transformer issue with local name usage", "feature_vi": "Sửa lỗi trình chuyển đổi kiểu dáng với việc sử dụng tên cục bộ", "summary_en": "Files: Babel plugin and test files + Message: 'fix' + Diff: Corrects issue with styled transformer not using the correct local name, confirmed by tests. Classified as a fix.", "summary_vi": "Files: plugin Babel và các file test + Message: 'fix' + Diff: Sửa lỗi trình chuyển đổi kiểu dáng không sử dụng đúng tên cục bộ, được xác nhận bởi các bài kiểm tra. Phân loại là một bản sửa lỗi.", "num_md_files": 1, "num_doc_files": 1, "num_js_files": 2, "num_test_files": 2, "num_snap_files": 1, "num_dirs_changed": 4}
{"repo": "11ty/eleventy", "commit_sha": "bc6bff88b990ac71698f4ae1fde3fc854f3023e3", "commit_message": "Fixes Windows build", "author": "Zach Leatherman", "date": "2025-04-04T22:19:55Z", "files_changed": "src/Engines/Nunjucks.js", "file_count": "", "lines_added": "4", "lines_removed": "1", "total_changes": 5, "diff_content": "@@ -79,7 +79,10 @@ export default class Nunjucks extends TemplateEngine {\n \t\t\t// NunjucksEnvironment:\n \t\t\t// loader.pathToNames: {'ABSOLUTE_PATH/src/_includes/components/possum-home.css': 'components/possum-home.css'}\n \t\t\t// loader.cache: { 'components/possum-home.css': [Template] }\n-\t\t\tlet absTmplPath = TemplatePath.absolutePath(templatePath);\n+\t\t\t// Nunjucks stores these as Operating System native paths\n+\t\t\tlet absTmplPath = TemplatePath.normalizeOperatingSystemFilePath(\n+\t\t\t\tTemplatePath.absolutePath(templatePath),\n+\t\t\t);\n \t\t\tfor (let loader of this.njkEnv.loaders) {\n \t\t\t\tlet nunjucksName = loader.pathsToNames[absTmplPath];\n \t\t\t\tif (nunjucksName) {\n", "commit_type": "fix", "dev_area": "Backend", "risk": 3, "confidence_score": 5, "feature_en": "Fix Windows build by normalizing file paths", "feature_vi": "Sửa lỗi bản dựng Windows bằng cách chuẩn hóa đường dẫn tệp", "summary_en": "Files: Javascript (.js) Backend + Message: 'fix' + Diff: adds file path normalization for Windows builds.  Confirmed as fix.", "summary_vi": "Files: Javascript (.js) Backend + Message: 'fix' + Diff: thêm chuẩn hóa đường dẫn tệp cho bản dựng Windows. Xác nhận là sửa lỗi.", "num_js_files": 1, "num_dirs_changed": 1}
{"repo": "payloadcms/payload", "commit_sha": "53ad02a8e8e59a62418be09c7305a5333035a5c5", "commit_message": "test: fix flaky uploads test (#13141)", "author": "Jarrod Flesch", "date": "2025-07-12T11:03:12Z", "files_changed": "test/uploads/e2e.spec.ts", "file_count": "", "lines_added": "4", "lines_removed": "16", "total_changes": 20, "diff_content": "@@ -1,6 +1,7 @@\n import type { Page } from '@playwright/test'\n \n import { expect, test } from '@playwright/test'\n+import { toggleColumn } from 'helpers/e2e/toggleColumn.js'\n import { openDocDrawer } from 'helpers/e2e/toggleDocDrawer.js'\n import path from 'path'\n import { wait } from 'payload/shared'\n@@ -1424,23 +1425,10 @@ describe('Uploads', () => {\n   test('should see upload previews in relation list if allowed in config', async () => {\n     await page.goto(relationPreviewURL.list)\n \n-    await wait(110)\n-\n     // Show all columns with relations\n-    await page.locator('.list-controls__toggle-columns').click()\n-    await expect(page.locator('.pill-selector')).toBeVisible()\n-    const imageWithoutPreview2Button = page.locator(`.pill-selector .pill-selector__pill`, {\n-      hasText: exactText('Image Without Preview2'),\n-    })\n-    const imageWithPreview3Button = page.locator(`.pill-selector .pill-selector__pill`, {\n-      hasText: exactText('Image With Preview3'),\n-    })\n-    const imageWithoutPreview3Button = page.locator(`.pill-selector .pill-selector__pill`, {\n-      hasText: exactText('Image Without Preview3'),\n-    })\n-    await imageWithoutPreview2Button.click()\n-    await imageWithPreview3Button.click()\n-    await imageWithoutPreview3Button.click()\n+    await toggleColumn(page, { columnLabel: 'Image Without Preview2', targetState: 'on' })\n+    await toggleColumn(page, { columnLabel: 'Image With Preview3', targetState: 'on' })\n+    await toggleColumn(page, { columnLabel: 'Image Without Preview3', targetState: 'on' })\n \n     // Wait for the columns to be displayed\n     await expect(page.locator('.cell-imageWithoutPreview3')).toBeVisible()\n", "commit_type": "test", "dev_area": "Testing", "risk": 3, "confidence_score": 5, "feature_en": "Fix flaky uploads test", "feature_vi": "Sửa lỗi kiểm tra tải lên không ổn định", "summary_en": "Files: test file + Message: 'fix' + Diff: Improved column toggling in tests → Classified as Testing fix", "summary_vi": "Files: tệp kiểm tra + Message: 'fix' + Diff: Cải thiện việc chuyển đổi cột trong các bài kiểm tra → Phân loại là sửa lỗi kiểm tra", "num_ts_files": 1, "num_test_files": 1, "num_dirs_changed": 1}
